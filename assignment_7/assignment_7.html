<!DOCTYPE html>
<html>
    <script src="data.js"></script>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible", content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> wildfire leaflet map </title>
</head>
<!-- leaflet script -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
 <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
<style>
    #mapid{height: 400px; width: 1000px}
</style>
</head>
<body>

<!-- ids -->
<h1>2024 Wildfires</h1>
<h2 id ="wildfirename">Wildfire ID:</h2>
<h3 id ="discoverydate">Discovery Date + Time:</h3>
<input id="slide" type = "range" name = "FireNum" min = "0" max = "2060" oninput="slider_val(this.value)">

<!-- add map -->
<div id="mapid"></div>
  <script>
    // coords of US 37.0902, -95.7129, need to have hawaii and pr in view
      var wildfire_map = L.map('mapid').setView([37.0902, -95.7129], 3);
      L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19,
          attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
          }).addTo(wildfire_map);

///// icon for map
var LeafIcon = L.Icon.extend({
            options: {
                iconSize:     [15, 15],
                iconAnchor:   [15, 15],
            }
        })
// fire icon from iconduck https://iconduck.com/emojis/37553/fire
var fireicon = new LeafIcon({iconUrl: 'https://static-00.iconduck.com/assets.00/fire-emoji-402x512-8ma95d17.png'});

// before we can use slider, need to sort data :/
wildfire_data.features.sort(function (a, b) {
    if (a.properties.FireDiscoveryDateTime < b.properties.FireDiscoveryDateTime)
        return -1;
    else if (a.properties.FireDiscoveryDateTime > b.properties.FireDiscoveryDateTime)
        return 1;
});

///// slider 
// make slider function
function slider_val(value) { 
      document.getElementById('discoverydate').innerHTML = 'Discovery Date + Time: ' + wildfire_data.features[value].properties.FireDiscoveryDateTime
      document.getElementById('wildfirename').innerHTML = 'Wildfire ID: ' + wildfire_data.features[value].properties.UniqueFireIdentifier
      // wildfire_map.removeLayer(wildfire_geo);
      wildfire_geo = L.geoJson(wildfire_data.features[value],{
      pointToLayer: function(feature,latlng){
      return L.marker(latlng, {icon: fireicon})
                }
            })
            wildfire_map.addLayer(wildfire_geo);
            
        }
        slider_val(0)

// starting value is 0, first fire 
  window.onload = function() {
  document.getElementById('slide').value = 0;  
    }; 
  </script>
</body>
</html>